<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.codingpupii.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="实现步骤 新建web maven工程 加入依赖spring-webmvc依赖，间接把spring的依赖都加入到项目jsp，servlet依赖  3.重点： 在web.xml中注册springmvc框架的核心对象DispatcherServlet   1)DispatcherServlet叫做中央调度器， 是一个servlet， 它的父类是继承HttpServlet   2)DispatcherSe">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringMVC">
<meta property="og:url" content="https://www.codingpupii.com/2021/05/14/SpringMVC/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="实现步骤 新建web maven工程 加入依赖spring-webmvc依赖，间接把spring的依赖都加入到项目jsp，servlet依赖  3.重点： 在web.xml中注册springmvc框架的核心对象DispatcherServlet   1)DispatcherServlet叫做中央调度器， 是一个servlet， 它的父类是继承HttpServlet   2)DispatcherSe">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.codingpupii.com/2021/05/14/SpringMVC/BaiduNetdiskDownload/SpringMVC/springmvc.png">
<meta property="og:image" content="https://www.codingpupii.com/2021/05/14/SpringMVC/Users/zzz/AppData/Roaming/Typora/typora-user-images/image-20210523201038426.png">
<meta property="article:published_time" content="2021-05-13T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-23T12:13:26.558Z">
<meta property="article:author" content="pupil">
<meta property="article:tag" content="SpringMVC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.codingpupii.com/2021/05/14/SpringMVC/BaiduNetdiskDownload/SpringMVC/springmvc.png">

<link rel="canonical" href="https://www.codingpupii.com/2021/05/14/SpringMVC/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>SpringMVC | Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.codingpupii.com/2021/05/14/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="pupil">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringMVC
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-05-14 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-14T00:00:00+08:00">2021-05-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-05-23 20:13:26" itemprop="dateModified" datetime="2021-05-23T20:13:26+08:00">2021-05-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><ol>
<li>新建web maven工程</li>
<li>加入依赖<br>spring-webmvc依赖，间接把spring的依赖都加入到项目<br>jsp，servlet依赖</li>
</ol>
<p>3.重点： 在web.xml中注册springmvc框架的核心对象DispatcherServlet<br>   1)DispatcherServlet叫做中央调度器， 是一个servlet， 它的父类是继承HttpServlet<br>   2)DispatcherServlet页叫做前端控制器（front controller）<br>   3)DispatcherServlet负责接收用户提交的请求， 调用其它的控制器对象，<br>                      并把请求的处理结果显示给用户</p>
<p>4.创建一个发起请求的页面 index.jsp</p>
<p>5.创建控制器(处理器)类<br>  1）在类的上面加入@Controller注解，创建对象，并放入到springmvc容器中<br>  2）在类中的方法上面加入@RequestMapping注解。</p>
<p>6.创建一个作为结果的jsp，显示请求的处理结果。</p>
<p>7.创建springmvc的配置文件（spring的配置文件一样）<br>  1）声明组件扫描器， 指定@Contorller注解所在的包名<br>  2）声明视图解析器。帮助处理视图的。</p>
<p>pom.xml 配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bjpowernode<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ch01-hello-springmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--servlet依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--springmvc依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 编码和编译和JDK版本 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    注册springmvc的核心对象DispatcherServlet</p>
<p>​    需要在tomcat服务器启动后，创建DispatcherServlet对象的实例。</p>
<p>​    为什么要创建DispatcherServlet对象的实例呢？</p>
<p>​    因为DispatcherServlet在他的创建过程中， 会同时创建springmvc容器对象，读取springmvc的配置文件，把这个配置文件中的对象都创建好， 当用户发起请求时就可以直接使用对象了。</p>
<p>​    servlet的初始化会执行init（）方法。 DispatcherServlet在init（）中{</p>
<p>​      //创建容器，读取配置文件</p>
<p>​      WebApplicationContext ctx = new ClassPathXmlApplicationContext(“springmvc.xml”);</p>
<p>​      //把容器对象放入到ServletContext中</p>
<p>​      getServletContext().setAttribute(key, ctx);</p>
<p>​    }**</p>
<p><strong>读取配置文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!--自定义springmvc读取的配置文件的位置--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--springmvc的配置文件的位置的属性--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--指定自定义文件的位置--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:Springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!--在tomcat启动后，创建Servlet对象</span></span><br><span class="line"><span class="comment">           load-on-startup:表示tomcat启动后创建对象的顺序。它的值是整数，数值越小，</span></span><br><span class="line"><span class="comment">                           tomcat创建对象的时间越早。 大于等于0的整数。</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">           使用框架的时候， url-pattern可以使用两种值</span></span><br><span class="line"><span class="comment">           1. 使用扩展名方式， 语法 *.xxxx , xxxx是自定义的扩展名。 常用的方式 *.do, *.action, *.mvc等等</span></span><br><span class="line"><span class="comment">              不能使用 *.jsp</span></span><br><span class="line"><span class="comment">              http://localhost:8080/myweb/some.do</span></span><br><span class="line"><span class="comment">              http://localhost:8080/myweb/other.do</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">           2.使用斜杠 &quot;/&quot;</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@Controller</span>:创建处理器对象，对象放在springmvc容器中。</span></span><br><span class="line"><span class="comment"> *  位置：在类的上面</span></span><br><span class="line"><span class="comment"> *  和Spring中讲的<span class="doctag">@Service</span> ,<span class="doctag">@Component</span></span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  能处理请求的都是控制器（处理器）： MyController能处理请求，</span></span><br><span class="line"><span class="comment"> *                         叫做后端控制器（back controller）</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  没有注解之前，需要实现各种不同的接口才能做控制器使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理用户提交的请求，springmvc是使用方法来处理的</span></span><br><span class="line"><span class="comment">     * 方法是自定义的， 可以有多种返回值， 多种参数，方法名称自定义</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 准备使用doSome方法处理some.do请求。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@RequestMapping</span>: 请求映射，作用是把一个请求地址和一个方法绑定在一起。</span></span><br><span class="line"><span class="comment">     *                  一个请求指定一个方法处理。</span></span><br><span class="line"><span class="comment">     *       属性： 1. value 是一个String，表示请求的uri地址的（some.do）。</span></span><br><span class="line"><span class="comment">     *                value的值必须是唯一的， 不能重复。 在使用时，推荐地址以“/”开头</span></span><br><span class="line"><span class="comment">     *       位置：1.在方法的上面，常用的。</span></span><br><span class="line"><span class="comment">     *            2.在类的上面</span></span><br><span class="line"><span class="comment">     *  说明： 使用RequestMapping修饰的方法叫做处理器方法或者控制器方法。</span></span><br><span class="line"><span class="comment">     *  使用<span class="doctag">@RequestMapping</span>修饰的方法可以处理请求的，类似Servlet中的doGet, doPost</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  返回值：ModelAndView 表示本次请求的处理结果</span></span><br><span class="line"><span class="comment">     *   Model: 数据，请求处理完成后，要显示给用户的数据</span></span><br><span class="line"><span class="comment">     *   View: 视图， 比如jsp等等。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/some.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doSome</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;欢迎&quot;</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;fun&quot;</span>, <span class="string">&quot;执行dosome&quot;</span>);</span><br><span class="line">        <span class="comment">//指定视图, 指定视图的完整路径</span></span><br><span class="line">        <span class="comment">//框架对视图执行的forward操作， request.getRequestDispather(&quot;/show.jsp).forward(...)</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;/show.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Springmvc.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--声明组件扫描器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;controller&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>SpringMVC：是基于spring的一个框架， 实际上就是spring的一个模块， 专门是做web开发的。理解是servlet的一个升级</p>
<p>web开发底层是servlet ， 框架是在servlet基础上面加入一些功能，让你做web开发方便。</p>
<p>SpringMVC就是一个Spring。 Spring是容器，ioc能够管理对象，使用&lt;bean&gt;, @Component, @Repository, @Service, @Controller<br>SpringMVC能够创建对象， 放入到容器中（SpringMVC容器）， springmvc容器中放的是控制器对象，</p>
<p>我们要做的是 使用@Contorller创建控制器对象， 把对象放入到springmvc容器中， 把创建的对象作为控制器使用这个控制器对象能接收用户的请求， 显示处理结果，就当做是一个servlet使用。</p>
<p>使用@Controller注解创建的是一个普通类的对象， 不是Servlet。 springmvc赋予了控制器对象一些额外的功能。</p>
<p>web开发底层是servlet， springmvc中有一个对象是Servlet ： DispatherServlet(中央调度器)<br>DispatherServlet: 负责接收用户的所有请求， 用户把请求给了DispatherServlet， 之后DispatherServlet把请求转发给<br>                                我们的Controller对象， 最后是Controller对象处理请求。</p>
<h2 id="springmvc请求的处理流程"><a href="#springmvc请求的处理流程" class="headerlink" title="springmvc请求的处理流程"></a>springmvc请求的处理流程</h2><p> 1）发起some.do<br> 2）tomcat(web.xml–url-pattern知道 *.do的请求给DispatcherServlet)<br> 3）DispatcherServlet（根据springmvc.xml配置知道 some.do—doSome()）<br> 4）DispatcherServlet把some.do转发个MyController.doSome()方法<br> 5）框架执行doSome（）把得到ModelAndView进行处理， 转发到show.jsp</p>
<p>上面的过程简化的方式<br>  some.do—DispatcherServlet—MyController</p>
<p><img src="/2021/05/14/SpringMVC/BaiduNetdiskDownload\SpringMVC\springmvc.png" alt="springmvc"></p>
<h2 id="springmvc执行过程源代码分析"><a href="#springmvc执行过程源代码分析" class="headerlink" title="springmvc执行过程源代码分析"></a>springmvc执行过程源代码分析</h2><ol>
<li>tomcat启动，创建容器的过程<br>通过load-on-start标签指定的1，创建DisaptcherServlet对象，<br>DisaptcherServlet它的父类是继承HttpServlet的， 它是一个serlvet， 在被创建时，会执行init（）方法。<br>在init（）方法中<br>//创建容器，读取配置文件<br> WebApplicationContext ctx = new ClassPathXmlApplicationContext(“springmvc.xml”);<br> //把容器对象放入到ServletContext中<br> getServletContext().setAttribute(key, ctx);</li>
</ol>
<p>  上面创建容器作用： 创建@controller注解所在的类的对象， 创建MyController对象，<br>   这个对象放入到 springmvc的容器中， 容器是map ， 类似 map.put(“myController”,MyController对象)</p>
<p>2.请求的处理过程<br>  1）执行servlet的service()<br>       protected void service(HttpServletRequest request, HttpServletResponse response)</p>
<p>   protected void doService(HttpServletRequest request, HttpServletResponse response)</p>
<p>  DispatcherServlet.doDispatch(request, response){</p>
<p>​      调用MyController的.doSome()方法<br>  }</p>
<p>   doDispatch：springmvc中DispatcherServlet的核心方法， 所有的请求都在这个方法中完成的。</p>
<p>没有加入注解驱动标签时的状态<br>org.springframework.http.converter.ByteArrayHttpMessageConverter<br>org.springframework.http.converter.StringHttpMessageConverter<br>org.springframework.http.converter.xml.SourceHttpMessageConverter<br>org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter</p>
<p>加入注解驱动标签时的状态<br>org.springframework.http.converter.ByteArrayHttpMessageConverter<br>org.springframework.http.converter.StringHttpMessageConverter<br>org.springframework.http.converter.ResourceHttpMessageConverter<br>org.springframework.http.converter.ResourceRegionHttpMessageConverter<br>org.springframework.http.converter.xml.SourceHttpMessageConverter<br>org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter<br>org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter<br>org.springframework.http.converter.json.MappingJackson2HttpMessageConverter</p>
<h2 id="视图解析器"><a href="#视图解析器" class="headerlink" title="视图解析器"></a>视图解析器</h2><p>Springmvc.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--声明springmvc框架中的视图解析器--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/view/&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当配置了视图解析器后，可以使用逻辑名称（文件名），指定视图</span></span><br><span class="line">      <span class="comment">//框架会使用视图解析器的前缀 + 逻辑名称 + 后缀 组成完成路径， 这里就是字符连接操作</span></span><br><span class="line">      <span class="comment">///WEB-INF/view/ + show + .jsp</span></span><br><span class="line">      mv.setViewName(<span class="string">&quot;show&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="RequestMapping"></a>RequestMapping</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 	  <span class="doctag">@RequestMapping</span>:</span></span><br><span class="line"><span class="comment"> *    value ： 所有请求地址的公共部分，叫做模块名称</span></span><br><span class="line"><span class="comment"> *    位置： 放在类的上面</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@RequestMapping</span> : 请求映射</span></span><br><span class="line"><span class="comment">     *             属性： method， 表示请求的方式。 它的值RequestMethod类枚举值。</span></span><br><span class="line"><span class="comment">     *                    例如表示get请求方式， RequestMethod.GET</span></span><br><span class="line"><span class="comment">     *                    post方式， RequestMethod.POST</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  你不用get方式，错误是：</span></span><br><span class="line"><span class="comment">     *  HTTP Status 405 - Request method &#x27;GET&#x27; not supported</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//指定some.do使用get请求方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/some.do&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doSome</span><span class="params">()</span></span>&#123;  <span class="comment">// doGet()--service请求处理</span></span><br><span class="line">        <span class="comment">//处理some.do请求了。 相当于service调用处理完成了。</span></span><br><span class="line">        ModelAndView mv  = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;欢迎使用springmvc做web开发&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;fun&quot;</span>,<span class="string">&quot;执行的是doSome方法&quot;</span>);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//指定other.do是post请求方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/other.do&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doOther</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ModelAndView mv  = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;====欢迎使用springmvc做web开发====&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;fun&quot;</span>,<span class="string">&quot;执行的是doOther方法&quot;</span>);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;other&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//不指定请求方式，没有限制</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/first.do&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doFirst</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                                HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                                HttpSession session)</span></span>&#123;</span><br><span class="line">        ModelAndView mv  = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;====欢迎使用springmvc做web开发====&quot;</span> + 					request.getParameter(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        mv.addObject(<span class="string">&quot;fun&quot;</span>,<span class="string">&quot;执行的是doFirst方法&quot;</span>);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;other&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>处理器方法可以 包含以下四 类参数，这些参数会在系统调用时由系统自动赋值，即程序<br>员可在方法内直接使用。<br>➢ HttpServletRequest<br>➢ HttpServletResponse<br>➢ HttpSession<br>➢ 请求中所携带的请求参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--注册声明过滤器，解决post请求乱码的问题--&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;</span><br><span class="line">    &lt;!--设置项目中使用的字符编码--&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;utf-8&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;!--强制请求对象（HttpServletRequest）使用encoding编码的值--&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;forceRequestEncoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;true&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;!--强制应答对象（HttpServletResponse）使用encoding编码的值--&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;forceResponseEncoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;true&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">       /*:表示强制所有的请求先通过过滤器处理。</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">&lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>

<h2 id="逐个接收请求参数"><a href="#逐个接收请求参数" class="headerlink" title="逐个接收请求参数"></a>逐个接收请求参数</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;receivep.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">       name:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">       age:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 逐个接收请求参数：</span></span><br><span class="line"><span class="comment">    *   要求： 处理器（控制器）方法的形参名和请求中参数名必须一致。</span></span><br><span class="line"><span class="comment">    *          同名的请求参数赋值给同名的形参</span></span><br><span class="line"><span class="comment">    * 框架接收请求参数</span></span><br><span class="line"><span class="comment">    *   1. 使用request对象接收请求参数</span></span><br><span class="line"><span class="comment">    *      String strName = request.getParameter(&quot;name&quot;);</span></span><br><span class="line"><span class="comment">    *      String strAge = request.getParameter(&quot;age&quot;);</span></span><br><span class="line"><span class="comment">    *   2. springmvc框架通过 DispatcherServlet 调用 MyController的doSome()方法</span></span><br><span class="line"><span class="comment">    *      调用方法时，按名称对应，把接收的参数赋值给形参</span></span><br><span class="line"><span class="comment">    *      doSome（strName，Integer.valueOf(strAge)）</span></span><br><span class="line"><span class="comment">    *      框架会提供类型转换的功能，能把String转为 int ，long ， float， double等类型。</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  400状态码是客户端错误， 表示提交请求参数过程中，发生了问题。</span></span><br><span class="line"><span class="comment">    */</span>	</span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/receivep.do&quot;)</span></span><br><span class="line"><span class="comment">//包装类可以为空值</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doSome</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">       ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">       modelAndView.addObject(<span class="string">&quot;myname&quot;</span>, name);</span><br><span class="line">       modelAndView.addObject(<span class="string">&quot;myage&quot;</span>, age);</span><br><span class="line">       modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> modelAndView;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>show.jsp<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h3</span>&gt;</span>name:$&#123;myname&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h3</span>&gt;</span>age:$&#123;myage&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 请求中参数名和处理器方法的形参名不一样</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@RequestParam</span>: 逐个接收请求参数中， 解决请求中参数名形参名不一样的问题</span></span><br><span class="line"><span class="comment">    *      属性： 1. value 请求中的参数名称</span></span><br><span class="line"><span class="comment">    *            2. required 是一个boolean，默认是true</span></span><br><span class="line"><span class="comment">    *                true：表示请求中必须包含此参数。</span></span><br><span class="line"><span class="comment">    *      位置： 在处理器方法的形参定义的前面</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/receiveparam.do&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">receiveParam</span><span class="params">(<span class="meta">@RequestParam(value = &quot;rname&quot;,required = false)</span> String name,</span></span></span><br><span class="line"><span class="params"><span class="function">                                    <span class="meta">@RequestParam(value = &quot;rage&quot;,required = false)</span> Integer age)</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;doSome, name=&quot;</span>+name+<span class="string">&quot;   age=&quot;</span>+age);</span><br><span class="line">       <span class="comment">//可以在方法中直接使用 name ， age</span></span><br><span class="line">       <span class="comment">//处理some.do请求了。 相当于service调用处理完成了。</span></span><br><span class="line">       ModelAndView mv  = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">       mv.addObject(<span class="string">&quot;myname&quot;</span>,name);</span><br><span class="line">       mv.addObject(<span class="string">&quot;myage&quot;</span>,age);</span><br><span class="line">       <span class="comment">//show是视图文件的逻辑名称（文件名称）</span></span><br><span class="line">       mv.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>post乱码解决方式</strong></p>
<p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册声明过滤器，解决post请求乱码的问题--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--设置项目中使用的字符编码--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--强制请求对象（HttpServletRequest）使用encoding编码的值--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--强制应答对象（HttpServletResponse）使用encoding编码的值--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          /*:表示强制所有的请求先通过过滤器处理。</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="使用java对象接收请求参数"><a href="#使用java对象接收请求参数" class="headerlink" title="使用java对象接收请求参数"></a>使用java对象接收请求参数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 属性名和请求中参数名一样</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Student的无参数构造方法===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;setName&quot;</span>+name);</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;setAge&quot;</span>+age);</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 处理器方法形参是java对象， 这个对象的属性名和请求中参数名一样的</span></span><br><span class="line"><span class="comment">    * 框架会创建形参的java对象， 给属性赋值。 请求中的参数是name，框架会调用setName()</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/receiveobject.do&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">receiveParam</span><span class="params">( Student myStudent)</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;receiveParam, name=&quot;</span>+myStudent.getName()+<span class="string">&quot;   age=&quot;</span>+myStudent.getAge());</span><br><span class="line">       <span class="comment">//可以在方法中直接使用 name ， age</span></span><br><span class="line">       <span class="comment">//处理some.do请求了。 相当于service调用处理完成了。</span></span><br><span class="line">       ModelAndView mv  = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">       mv.addObject(<span class="string">&quot;myname&quot;</span>,myStudent.getName());</span><br><span class="line">       mv.addObject(<span class="string">&quot;myage&quot;</span>,myStudent.getAge());</span><br><span class="line">       mv.addObject(<span class="string">&quot;mystudent&quot;</span>,myStudent);</span><br><span class="line">       <span class="comment">//show是视图文件的逻辑名称（文件名称）</span></span><br><span class="line">       mv.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>/WEB-INF/view/show.jsp从request作用域获取数据<span class="tag">&lt;/<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h3</span>&gt;</span>myname数据：$&#123;myname&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h3</span>&gt;</span>myage数据：$&#123;myage&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h3</span>&gt;</span>student数据：$&#123;mystudent&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="处理器方法的返回值"><a href="#处理器方法的返回值" class="headerlink" title="处理器方法的返回值"></a>处理器方法的返回值</h2><p><strong>1.返回 Mode l AndView</strong></p>
<p><strong>2.返回 String</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 处理器方法返回String--表示逻辑视图名称，需要配置视图解析器</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/returnString-view.do&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">doReturnView</span><span class="params">(HttpServletRequest request,String name, Integer age)</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;doReturnView, name=&quot;</span>+name+<span class="string">&quot;   age=&quot;</span>+age);</span><br><span class="line">       <span class="comment">//可以自己手工添加数据到request作用域</span></span><br><span class="line">       request.setAttribute(<span class="string">&quot;myname&quot;</span>,name);</span><br><span class="line">       request.setAttribute(<span class="string">&quot;myage&quot;</span>,age);</span><br><span class="line">       <span class="comment">// show : 逻辑视图名称，项目中配置了视图解析器</span></span><br><span class="line">       <span class="comment">// 框架对视图执行forward转发操作</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;show&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.返回</strong> <strong>void</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//处理器方法返回void， 响应ajax请求</span></span><br><span class="line">   <span class="comment">//手工实现ajax，json数据： 代码有重复的 1. java对象转为json； 2. 通过HttpServletResponse输出json数据</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/returnVoid-ajax.do&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doReturnVoidAjax</span><span class="params">(HttpServletResponse response, String name, Integer age)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;===doReturnVoidAjax====, name=&quot;</span>+name+<span class="string">&quot;   age=&quot;</span>+age);</span><br><span class="line">      <span class="comment">//处理ajax， 使用json做数据的格式</span></span><br><span class="line">      <span class="comment">//service调用完成了， 使用Student表示处理结果</span></span><br><span class="line">       Student student  = <span class="keyword">new</span> Student();</span><br><span class="line">       student.setName(<span class="string">&quot;张飞同学&quot;</span>);</span><br><span class="line">       student.setAge(<span class="number">28</span>);</span><br><span class="line"></span><br><span class="line">       String json = <span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="comment">//把结果的对象转为json格式的数据</span></span><br><span class="line">       <span class="keyword">if</span>( student != <span class="keyword">null</span>)&#123;</span><br><span class="line">           ObjectMapper om  = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">           json  = om.writeValueAsString(student);</span><br><span class="line">           System.out.println(<span class="string">&quot;student转换的json====&quot;</span>+json);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//输出数据，响应ajax的请求</span></span><br><span class="line">       response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">       PrintWriter pw  = response.getWriter();</span><br><span class="line">       pw.println(json);</span><br><span class="line">       pw.flush();</span><br><span class="line">       pw.close();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>4.返回 对象 Object</strong></p>
<p>需要导入 Jackson 的相关 Jar 包。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>springmvc处理器方法返回Object， 可以转为json输出到浏览器，响应ajax的<strong>内部原理</strong></p>
<ol>
<li><p><strong>&lt;mvc:annotation-driven&gt; 注解驱动。</strong><br>注解驱动实现的功能是 完成java对象到json，xml， text，二进制等数据格式的转换。<br>&lt;mvc:annotation-driven&gt;在加入到springmvc配置文件后， 会自动创建HttpMessageConverter接口的7个实现类对象， 包括 MappingJackson2HttpMessageConverter （使用jackson工具库中的ObjectMapper实现java对象转为json字符串）</p>
</li>
<li><p>HttpMessageConverter接口：消息转换器。<br>功能：定义了java转为json，xml等数据格式的方法。 这个接口有很多的实现类。这些实现类完成 java对象到json， java对象到xml，java对象到二进制数据的转换</p>
<p>下面的两个方法是控制器类把结果输出给浏览器时使用的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">canWrite</span><span class="params">(Class&lt;?&gt; var1, <span class="meta">@Nullable</span> MediaType var2)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(T var1, <span class="meta">@Nullable</span> MediaType var2, HttpOutputMessage var3)</span></span></span><br></pre></td></tr></table></figure>

<p>例如处理器方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/returnString.do&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Student <span class="title">doReturnView2</span><span class="params">(HttpServletRequest request,String name, Integer age)</span></span>&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setName(<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        student.setAge(<span class="number">20</span>);</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1）canWrite作用检查处理器方法的返回值，能不能转为var2表示的数据格式。<br>  检查student(lisi，20)能不能转为var2表示的数据格式。如果检查能转为json，canWrite返回true<br>  MediaType：表示数格式的， 例如json， xml等等</p>
<p>2）write：把处理器方法的返回值对象，调用jackson中的ObjectMapper转为json字符串。<br>   json  = om.writeValueAsString(student);</p>
</li>
</ol>
<p>3.@ResponseBody注解<br>  放在处理器方法的上面， 通过HttpServletResponse输出数据，响应ajax请求的。<br>          PrintWriter pw  = response.getWriter();<br>          pw.println(json);<br>          pw.flush();<br>          pw.close();</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 处理器方法返回一个Student，通过框架转为json，响应ajax请求</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@ResponseBody</span>:</span></span><br><span class="line"><span class="comment">    *    作用：把处理器方法返回对象转为json后，通过HttpServletResponse输出给浏览器。</span></span><br><span class="line"><span class="comment">    *    位置：方法的定义上面。 和其它注解没有顺序的关系。</span></span><br><span class="line"><span class="comment">    * 返回对象框架的处理流程：</span></span><br><span class="line"><span class="comment">    *  1. 框架会把返回Student类型，调用框架的中ArrayList&lt;HttpMessageConverter&gt;中每个类的canWrite()方法</span></span><br><span class="line"><span class="comment">    *     检查那个HttpMessageConverter接口的实现类能处理Student类型的数据--MappingJackson2HttpMessageConverter</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  2.框架会调用实现类的write（）， MappingJackson2HttpMessageConverter的write()方法</span></span><br><span class="line"><span class="comment">    *    把李四同学的student对象转为json， 调用Jackson的ObjectMapper实现转为json</span></span><br><span class="line"><span class="comment">    *    contentType: application/json;charset=utf-8</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  3.框架会调用<span class="doctag">@ResponseBody</span>把2的结果数据输出到浏览器， ajax请求处理完成</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/returnStudentJson.do&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Student <span class="title">doStudentJsonObject</span><span class="params">(String name, Integer age)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//调用service，获取请求结果数据 ， Student对象表示结果数据</span></span><br><span class="line">       Student student = <span class="keyword">new</span> Student();</span><br><span class="line">       student.setName(<span class="string">&quot;李四同学&quot;</span>);</span><br><span class="line">       student.setAge(<span class="number">20</span>);</span><br><span class="line">       <span class="keyword">return</span> student; <span class="comment">// 会被框架转为json</span></span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  处理器方法返回List&lt;Student&gt;</span></span><br><span class="line"><span class="comment">    * 返回对象框架的处理流程：</span></span><br><span class="line"><span class="comment">    *  1. 框架会把返回List&lt;Student&gt;类型，调用框架的中ArrayList&lt;HttpMessageConverter&gt;中每个类的canWrite()方法</span></span><br><span class="line"><span class="comment">    *     检查那个HttpMessageConverter接口的实现类能处理Student类型的数据--MappingJackson2HttpMessageConverter</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  2.框架会调用实现类的write（）， MappingJackson2HttpMessageConverter的write()方法</span></span><br><span class="line"><span class="comment">    *    把李四同学的student对象转为json， 调用Jackson的ObjectMapper实现转为json array</span></span><br><span class="line"><span class="comment">    *    contentType: application/json;charset=utf-8</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  3.框架会调用<span class="doctag">@ResponseBody</span>把2的结果数据输出到浏览器， ajax请求处理完成</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/returnStudentJsonArray.do&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">doStudentJsonObjectArray</span><span class="params">(String name, Integer age)</span> </span>&#123;</span><br><span class="line">       List&lt;Student&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       <span class="comment">//调用service，获取请求结果数据 ， Student对象表示结果数据</span></span><br><span class="line">       Student student = <span class="keyword">new</span> Student();</span><br><span class="line">       student.setName(<span class="string">&quot;李四同学&quot;</span>);</span><br><span class="line">       student.setAge(<span class="number">20</span>);</span><br><span class="line">       list.add(student);</span><br><span class="line">       student = <span class="keyword">new</span> Student();</span><br><span class="line">       student.setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">       student.setAge(<span class="number">28</span>);</span><br><span class="line">       list.add(student);</span><br><span class="line">       <span class="keyword">return</span> list;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 处理器方法返回的是String ， String表示数据的，不是视图。</span></span><br><span class="line"><span class="comment">    * 区分返回值String是数据，还是视图，看有没有<span class="doctag">@ResponseBody</span>注解</span></span><br><span class="line"><span class="comment">    * 如果有<span class="doctag">@ResponseBody</span>注解，返回String就是数据，反之就是视图</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 默认使用“text/plain;charset=ISO-8859-1”作为contentType,导致中文有乱码，</span></span><br><span class="line"><span class="comment">    * 解决方案：给RequestMapping增加一个属性 produces, 使用这个属性指定新的contentType.</span></span><br><span class="line"><span class="comment">    * 返回对象框架的处理流程：</span></span><br><span class="line"><span class="comment">    *  1. 框架会把返回String类型，调用框架的中ArrayList&lt;HttpMessageConverter&gt;中每个类的canWrite()方法</span></span><br><span class="line"><span class="comment">    *     检查那个HttpMessageConverter接口的实现类能处理String类型的数据--StringHttpMessageConverter</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  2.框架会调用实现类的write（）， StringHttpMessageConverter的write()方法</span></span><br><span class="line"><span class="comment">    *    把字符按照指定的编码处理 text/plain;charset=ISO-8859-1</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *  3.框架会调用<span class="doctag">@ResponseBody</span>把2的结果数据输出到浏览器， ajax请求处理完成</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/returnStringData.do&quot;,produces = &quot;text/plain;charset=utf-8&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">doStringData</span><span class="params">(String name,Integer age)</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;Hello SpringMVC 返回对象，表示数据&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="发起的请求是由哪些服务器程序处理的"><a href="#发起的请求是由哪些服务器程序处理的" class="headerlink" title="发起的请求是由哪些服务器程序处理的"></a>发起的请求是由哪些服务器程序处理的</h2><p><a target="_blank" rel="noopener" href="http://localhost:8080/ch05_url_pattern/index.jsp">http://localhost:8080/ch05_url_pattern/index.jsp</a> ：tomcat（jsp会转为servlet）<br><a target="_blank" rel="noopener" href="http://localhost:8080/ch05_url_pattern/js/jquery-3.4.1.js">http://localhost:8080/ch05_url_pattern/js/jquery-3.4.1.js</a> ： tomcat<br><a target="_blank" rel="noopener" href="http://localhost:8080/ch05_url_pattern/images/p1.jpg">http://localhost:8080/ch05_url_pattern/images/p1.jpg</a> ： tomcat<br><a target="_blank" rel="noopener" href="http://localhost:8080/ch05_url_pattern/html/test.html%EF%BC%9A">http://localhost:8080/ch05_url_pattern/html/test.html：</a> tomcat<br><a target="_blank" rel="noopener" href="http://localhost:8080/ch05_url_pattern/some.do">http://localhost:8080/ch05_url_pattern/some.do</a> ：  DispatcherServlet（springmvc框架处理的）</p>
<p>tomcat本身能处理静态资源的访问， 像<strong>html</strong>， <strong>图片</strong>， <strong>js文件</strong>都是<strong>静态资源</strong></p>
<p>tomcat的web.xml文件有一个servlet 名称是 default ， 在服务器启动时创建的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.apache.catalina.servlets.DefaultServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>debug<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>0<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>listings<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  表示静态资源和未映射的请求都这个default处理</span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>default这个servlet作用： </p>
<p>1.处理静态资源<br>2.处理未映射到其它servlet的请求。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myweb<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        使用框架的时候， url-pattern可以使用两种值</span></span><br><span class="line"><span class="comment">        1. 使用扩展名方式， 语法 *.xxxx , xxxx是自定义的扩展名。 常用的方式 *.do, *.action, *.mvc等等</span></span><br><span class="line"><span class="comment">           不能使用 *.jsp</span></span><br><span class="line"><span class="comment">           http://localhost:8080/myweb/some.do</span></span><br><span class="line"><span class="comment">           http://localhost:8080/myweb/other.do</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        2.使用斜杠 &quot;/&quot;</span></span><br><span class="line"><span class="comment">          当你的项目中使用了  / ，它会替代 tomcat中的default。</span></span><br><span class="line"><span class="comment">          导致所有的静态资源都给DispatcherServlet处理， 默认情况下DispatcherServlet没有处理静态资源的能力。</span></span><br><span class="line"><span class="comment">          没有控制器对象能处理静态资源的访问。所以静态资源（html，js，图片，css）都是404.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          动态资源some.do是可以访问，的因为我们程序中有MyController控制器对象，能处理some.do请求。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="处理静态资源的方法"><a href="#处理静态资源的方法" class="headerlink" title="处理静态资源的方法"></a>处理静态资源的方法</h2><p>springmvc.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--第一种处理静态资源的方式：</span></span><br><span class="line"><span class="comment">    需要在springmvc配置文件加入 &lt;mvc:default-servlet-handler&gt;</span></span><br><span class="line"><span class="comment">    原理是： 加入这个标签后，框架会创健控制器对象DefaultServletHttpRequestHandler（类似我们自己创建的MyController）.</span></span><br><span class="line"><span class="comment">    DefaultServletHttpRequestHandler这个对象可以把接收的请求转发给 tomcat的default这个servlet。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--第二种处理静态资源的方式</span></span><br><span class="line"><span class="comment">    mvc:resources 加入后框架会创建 ResourceHttpRequestHandler这个处理器对象。</span></span><br><span class="line"><span class="comment">    让这个对象处理静态资源的访问，不依赖tomcat服务器。</span></span><br><span class="line"><span class="comment">    mapping:访问静态资源的uri地址， 使用通配符 **</span></span><br><span class="line"><span class="comment">    location：静态资源在你的项目中的目录位置。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    images/**:表示 images/p1.jpg  , images/user/logo.gif , images/order/history/list.png</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/images/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/images/&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/html/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/html/&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--mvc:resources和@RequestMapping有一定的冲突--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--使用一个配置语句，指定多种静态资源的访问--&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--&lt;mvc:resources mapping=&quot;/static/**&quot; location=&quot;/static/&quot; /&gt;--&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="路径问题"><a href="#路径问题" class="headerlink" title="路径问题"></a>路径问题</h2><p>在jsp ， html中使用的地址， 都是在前端页面中的地址，都是相对地址</p>
<p>地址分类：<br> 1.绝对地址 ， 带有协议名称的是绝对地址，  <a target="_blank" rel="noopener" href="http://www.baidu.com/">http://www.baidu.com</a> , <a href="ftp://202.122.23.1/">ftp://202.122.23.1</a><br> 2.相对地址， 没有协议开头的， 例如 user/some.do  , /user/some.do<br>              相对地址不能独立使用，必须有一个参考地址。 通过参考地址+相对地址本身才能指定资源。</p>
<p><strong>不加斜杠</strong></p>
<p>在index.jsp发起 user/some.do请求，访问地址变为 <a target="_blank" rel="noopener" href="http://localhost:8080/ch06_path/user/some.do">http://localhost:8080/ch06_path/user/some.do</a></p>
<p>当你的地址 没有斜杠开头,例如 user/some.do , 当你点击链接时， 访问地址是当前页面的地址加上链接的地址。<br>      <a target="_blank" rel="noopener" href="http://localhost:8080/ch06_path/">http://localhost:8080/ch06_path/</a> + user/some.do</p>
<p><strong>有斜杠</strong></p>
<p> index.jsp  访问 user/some.do  ， 返回后现在的地址： <a target="_blank" rel="noopener" href="http://localhost:8080/ch06_path/user/some.do">http://localhost:8080/ch06_path/user/some.do</a></p>
<p>  <a target="_blank" rel="noopener" href="http://localhost:8080/ch06_path/user/some.do">http://localhost:8080/ch06_path/user/some.do</a><br>  路径：      <a target="_blank" rel="noopener" href="http://localhost:8080/ch06_path/user/">http://localhost:8080/ch06_path/user/</a><br>  资源：   some.do</p>
<p>  在index.jsp在 user/some.do ，就变为 <a target="_blank" rel="noopener" href="http://localhost:8080/ch06_path/user/user/some.do">http://localhost:8080/ch06_path/user/user/some.do</a></p>
<p>  解决方案：<br>   1.加入${pageContext.request.contextPath}<br>   2.加入一个base标签， 是html语言中的标签。 表示当前页面中访问地址的基地址。<br>      你的页面中所有 没有“/”开头的地址，都是以base标签中的地址为参考地址<br>      使用base中的地址 + user/some.do 组成访问地址</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    String basePath = request.getScheme() + <span class="string">&quot;://&quot;</span> +</span><br><span class="line">            request.getServerName() + <span class="string">&quot;:&quot;</span> + request.getServerPort() +</span><br><span class="line">            request.getContextPath() + <span class="string">&quot;/&quot;</span>;</span><br><span class="line">%&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;base href=<span class="string">&quot;&lt;%=basePath%&gt;&quot;</span> /&gt;</span><br><span class="line">	&lt;/head&gt;</span><br></pre></td></tr></table></figure>

<h2 id="请求重定向和转发"><a href="#请求重定向和转发" class="headerlink" title="请求重定向和转发"></a>请求重定向和转发</h2><p>当处理器对请求处理完毕后，向其它资源进行跳转时，有两种跳转方式：请求转发与重定向。而根据所要跳转的资源类型，又可分为两类：跳转到页面与跳转到其它处理器。注意，对于请求转发的页面，可以是WEB INF 中页面；而重定向的页面，是不能为 WEB INF<br>中页的。因为重定向相当于用户再次发出一次请求，而用户是不能直接访问 WEB INF 中资源的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理器方法返回ModelAndView,实现转发forward</span></span><br><span class="line"><span class="comment"> * 语法： setViewName(&quot;forward:视图文件完整路径&quot;)</span></span><br><span class="line"><span class="comment"> * forward特点： 不和视图解析器一同使用，就当项目中没有视图解析器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/doForward.do&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doSome</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//处理some.do请求了。 相当于service调用处理完成了。</span></span><br><span class="line">    ModelAndView mv  = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;欢迎使用springmvc做web开发&quot;</span>);</span><br><span class="line">    mv.addObject(<span class="string">&quot;fun&quot;</span>,<span class="string">&quot;执行的是doSome方法&quot;</span>);</span><br><span class="line">    <span class="comment">//显示转发</span></span><br><span class="line">    <span class="comment">//mv.setViewName(&quot;forward:/WEB-INF/view/show.jsp&quot;);</span></span><br><span class="line"></span><br><span class="line">    mv.setViewName(<span class="string">&quot;forward:/hello.jsp&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 处理器方法返回ModelAndView,实现重定向redirect</span></span><br><span class="line"><span class="comment">    * 语法：setViewName(&quot;redirect:视图完整路径&quot;)</span></span><br><span class="line"><span class="comment">    * redirect特点： 不和视图解析器一同使用，就当项目中没有视图解析器</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 框架对重定向的操作：</span></span><br><span class="line"><span class="comment">    * 1.框架会把Model中的简单类型的数据，转为string使用，作为hello.jsp的get请求参数使用。</span></span><br><span class="line"><span class="comment">    *   目的是在 doRedirect.do 和 hello.jsp 两次请求之间传递数据</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 2.在目标hello.jsp页面可以使用参数集合对象 $&#123;param&#125;获取请求参数值</span></span><br><span class="line"><span class="comment">    *    $&#123;param.myname&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 3.重定向不能访问/WEB-INF资源</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/doRedirect.do&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doWithRedirect</span><span class="params">(String name,Integer age)</span></span>&#123;</span><br><span class="line">       <span class="comment">//处理some.do请求了。 相当于service调用处理完成了。</span></span><br><span class="line">       ModelAndView mv  = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">       <span class="comment">//数据放入到 request作用域</span></span><br><span class="line">       mv.addObject(<span class="string">&quot;myname&quot;</span>,name);</span><br><span class="line">       mv.addObject(<span class="string">&quot;myage&quot;</span>,age);</span><br><span class="line">       <span class="comment">//重定向</span></span><br><span class="line">       mv.setViewName(<span class="string">&quot;redirect:/hello.jsp&quot;</span>);</span><br><span class="line">       <span class="comment">//http://localhost:8080/ch08_forard_redirect/hello.jsp?myname=lisi&amp;myage=22</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//重定向不能访问/WEB-INF资源</span></span><br><span class="line">       <span class="comment">//mv.setViewName(&quot;redirect:/WEB-INF/view/show.jsp&quot;);</span></span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>异常处理步骤：<br>1.新建maven web项目<br>2.加入依赖<br>3.新建一个自定义异常类 MyUserException , 再定义它的子类NameException ,AgeException</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUserException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyUserException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyUserException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//表示当用户的姓名有异常，抛出NameException</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NameException</span> <span class="keyword">extends</span> <span class="title">MyUserException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NameException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NameException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当年龄有问题时，抛出的异常</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AgeException</span> <span class="keyword">extends</span> <span class="title">MyUserException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AgeException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AgeException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.在controller抛出NameException , AgeException</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/some.do&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doSome</span><span class="params">(String name,Integer age)</span> <span class="keyword">throws</span> MyUserException </span>&#123;</span><br><span class="line">       <span class="comment">//处理some.do请求了。 相当于service调用处理完成了。</span></span><br><span class="line">       ModelAndView mv  = <span class="keyword">new</span> ModelAndView();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//try &#123;</span></span><br><span class="line">           <span class="comment">//根据请求参数抛出异常</span></span><br><span class="line">           <span class="keyword">if</span> (!<span class="string">&quot;zs&quot;</span>.equals(name)) &#123;</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> NameException(<span class="string">&quot;姓名不正确！！！&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (age == <span class="keyword">null</span> || age &gt; <span class="number">80</span>) &#123;</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> AgeException(<span class="string">&quot;年龄比较大！！！&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//&#125;catch(Exception e)&#123;</span></span><br><span class="line">       <span class="comment">//   e.printStackTrace();</span></span><br><span class="line">       <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">       mv.addObject(<span class="string">&quot;myname&quot;</span>,name);</span><br><span class="line">       mv.addObject(<span class="string">&quot;myage&quot;</span>,age);</span><br><span class="line">       mv.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>5.创建一个普通类，作用全局异常处理类<br>  1）在类的上面加入@ControllerAdvice<br>  2) 在类中定义方法，方法的上面加入@ExceptionHandler</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ControllerAdvice</span> : 控制器增强（也就是说给控制器类增加功能--异常处理功能）</span></span><br><span class="line"><span class="comment"> *           位置：在类的上面。</span></span><br><span class="line"><span class="comment"> *  特点：必须让框架知道这个注解所在的包名，需要在springmvc配置文件声明组件扫描器。</span></span><br><span class="line"><span class="comment"> *  指定<span class="doctag">@ControllerAdvice</span>所在的包名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">//定义方法，处理发生的异常</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        处理异常的方法和控制器方法的定义一样， 可以有多个参数，可以有ModelAndView,</span></span><br><span class="line"><span class="comment">        String, void,对象类型的返回值</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        形参：Exception，表示Controller中抛出的异常对象。</span></span><br><span class="line"><span class="comment">        通过形参可以获取发生的异常信息。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        @ExceptionHandler(异常的class)：表示异常的类型，当发生此类型异常时，</span></span><br><span class="line"><span class="comment">        由当前方法处理</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = NameException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doNameException</span><span class="params">(Exception exception)</span></span>&#123;</span><br><span class="line">        <span class="comment">//处理NameException的异常。</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">           异常发生处理逻辑：</span></span><br><span class="line"><span class="comment">           1.需要把异常记录下来， 记录到数据库，日志文件。</span></span><br><span class="line"><span class="comment">             记录日志发生的时间，哪个方法发生的，异常错误内容。</span></span><br><span class="line"><span class="comment">           2.发送通知，把异常的信息通过邮件，短信，微信发送给相关人员。</span></span><br><span class="line"><span class="comment">           3.给用户友好的提示。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;姓名必须是zs，其它用户不能访问&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;ex&quot;</span>,exception);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;nameError&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理AgeException</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = AgeException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doAgeException</span><span class="params">(Exception exception)</span></span>&#123;</span><br><span class="line">        <span class="comment">//处理AgeException的异常。</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">           异常发生处理逻辑：</span></span><br><span class="line"><span class="comment">           1.需要把异常记录下来， 记录到数据库，日志文件。</span></span><br><span class="line"><span class="comment">             记录日志发生的时间，哪个方法发生的，异常错误内容。</span></span><br><span class="line"><span class="comment">           2.发送通知，把异常的信息通过邮件，短信，微信发送给相关人员。</span></span><br><span class="line"><span class="comment">           3.给用户友好的提示。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;你的年龄不能大于80&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;ex&quot;</span>,exception);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;ageError&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理其它异常， NameException, AgeException以外，不知类型的异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doOtherException</span><span class="params">(Exception exception)</span></span>&#123;</span><br><span class="line">        <span class="comment">//处理其它异常</span></span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;你的年龄不能大于80&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;ex&quot;</span>,exception);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;defaultError&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6.创建处理异常的视图页面<br>7.创建springmvc的配置文件<br> 1）组件扫描器 ，扫描@Controller注解<br> 2）组件扫描器，扫描@ControllerAdvice所在的包名<br> 3）声明注解驱动</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--处理需要的两步--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.bjpowernode.handler&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>拦截器：<br>1）拦截器是springmvc中的一种，需要实现HandlerInterceptor接口。<br>2）拦截器和过滤器类似，功能方向侧重点不同。 过滤器是用来过滤器请求参数，设置编码字符集等工作。<br>    拦截器是拦截用户的请求，做请求做判断处理的。<br>3）拦截器是全局的，可以对多个Controller做拦截。<br>   一个项目中可以有0个或多个拦截器， 他们在一起拦截用户的请求。<br>    拦截器常用在：用户登录处理，权限检查， 记录日志。</p>
<p><strong>拦截器的执行时间：</strong><br>  1）在请求处理之前， 也就是controller类中的方法执行之前先被拦截。<br>  2）在控制器方法执行之后也会执行拦截器。<br>  3）在请求处理完成后也会执行拦截器。</p>
<p><strong>拦截器步骤：</strong><br>1.新建maven web项目<br>2.加入依赖<br>3.创建Controller类<br>4.创建一个普通类，作为拦截器使用<br>  1）实现HandlerInterceptor接口<br>  2）实现接口中的三个方法<br>5.创建show.jsp<br>6.创建springmvc的配置文件<br>  1)组件扫描器 ，扫描@Controller注解<br>  2)声明拦截器，并指定拦截的请求uri地址</p>
<p><strong>一个拦截器</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//拦截器类：拦截用户的请求。</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> btime = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * preHandle叫做预处理方法。</span></span><br><span class="line"><span class="comment">     *   重要：是整个项目的入口，门户。 当preHandle返回true 请求可以被处理。</span></span><br><span class="line"><span class="comment">     *        preHandle返回false，请求到此方法就截止。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 参数：</span></span><br><span class="line"><span class="comment">     *  Object handler ： 被拦截的控制器对象</span></span><br><span class="line"><span class="comment">     * 返回值boolean</span></span><br><span class="line"><span class="comment">     *   true：请求是通过了拦截器的验证，可以执行处理器方法。</span></span><br><span class="line"><span class="comment">         *   拦截器的MyInterceptor的preHandle()</span></span><br><span class="line"><span class="comment">             =====执行MyController中的doSome方法=====</span></span><br><span class="line"><span class="comment">             拦截器的MyInterceptor的postHandle()</span></span><br><span class="line"><span class="comment">             拦截器的MyInterceptor的afterCompletion()</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">     *   false：请求没有通过拦截器的验证，请求到达拦截器就截止了。 请求没有被处理</span></span><br><span class="line"><span class="comment">     *      拦截器的MyInterceptor的preHandle()</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  特点：</span></span><br><span class="line"><span class="comment">     *   1.方法在控制器方法（MyController的doSome）之前先执行的。</span></span><br><span class="line"><span class="comment">     *     用户的请求首先到达此方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *   2.在这个 方法中可以获取请求的信息， 验证请求是否符合要求。</span></span><br><span class="line"><span class="comment">     *     可以验证用户是否登录， 验证用户是否有权限访问某个连接地址（url）。</span></span><br><span class="line"><span class="comment">     *      如果验证失败，可以截断请求，请求不能被处理。</span></span><br><span class="line"><span class="comment">     *      如果验证成功，可以放行请求，此时控制器方法才能执行。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        btime = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;拦截器的MyInterceptor的preHandle()&quot;</span>);</span><br><span class="line">        <span class="comment">//计算的业务逻辑，根据计算结果，返回true或者false</span></span><br><span class="line">        <span class="comment">//给浏览器一个返回结果</span></span><br><span class="line">        <span class="comment">//request.getRequestDispatcher(&quot;/tips.jsp&quot;).forward(request,response);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       postHandle:后处理方法。</span></span><br><span class="line"><span class="comment">       参数：</span></span><br><span class="line"><span class="comment">        Object handler：被拦截的处理器对象MyController</span></span><br><span class="line"><span class="comment">        ModelAndView mv:处理器方法的返回值</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        特点：</span></span><br><span class="line"><span class="comment">         1.在处理器方法之后执行的（MyController.doSome()）</span></span><br><span class="line"><span class="comment">         2.能够获取到处理器方法的返回值ModelAndView,可以修改ModelAndView中的</span></span><br><span class="line"><span class="comment">         数据和视图，可以影响到最后的执行结果。</span></span><br><span class="line"><span class="comment">         3.主要是对原来的执行结果做二次修正，</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         ModelAndView mv = MyController.doSome();</span></span><br><span class="line"><span class="comment">         postHandle(request,response,handler,mv);</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">                           HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                           Object handler, ModelAndView mv)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;拦截器的MyInterceptor的postHandle()&quot;</span>);</span><br><span class="line">        <span class="comment">//对原来的doSome执行结果，需要调整。</span></span><br><span class="line">        <span class="keyword">if</span>( mv != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//修改数据</span></span><br><span class="line">            mv.addObject(<span class="string">&quot;mydate&quot;</span>,<span class="keyword">new</span> Date());</span><br><span class="line">            <span class="comment">//修改视图</span></span><br><span class="line">            mv.setViewName(<span class="string">&quot;other&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      afterCompletion:最后执行的方法</span></span><br><span class="line"><span class="comment">      参数</span></span><br><span class="line"><span class="comment">        Object handler:被拦截器的处理器对象</span></span><br><span class="line"><span class="comment">        Exception ex：程序中发生的异常</span></span><br><span class="line"><span class="comment">      特点:</span></span><br><span class="line"><span class="comment">       1.在请求处理完成后执行的。框架中规定是当你的视图处理完成后，对视图执行了forward。就认为请求处理完成。</span></span><br><span class="line"><span class="comment">       2.一般做资源回收工作的， 程序请求过程中创建了一些对象，在这里可以删除，把占用的内存回收。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response,</span></span></span><br><span class="line"><span class="params"><span class="function">                                Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;拦截器的MyInterceptor的afterCompletion()&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> etime = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;计算从preHandle到请求处理完成的时间：&quot;</span>+(etime - btime ));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>springmvc.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--声明拦截器： 拦截器可以有0或多个--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--声明第一个拦截器--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--指定拦截的请求uri地址</span></span><br><span class="line"><span class="comment">               path：就是uri地址，可以使用通配符 **</span></span><br><span class="line"><span class="comment">                     ** ： 表示任意的字符，文件或者多级目录和目录中的文件</span></span><br><span class="line"><span class="comment">               http://localhost:8080/myweb/user/listUser.do</span></span><br><span class="line"><span class="comment">               http://localhost:8080/myweb/student/addStudent.do</span></span><br><span class="line"><span class="comment">           --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--声明拦截器对象--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.bjpowernode.handler.MyInterceptor&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>多个拦截器</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--声明第一个拦截器--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--声明拦截器对象--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.bjpowernode.handler.MyInterceptor&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--声明第二个拦截器--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.bjpowernode.handler.MyInterceptor2&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>1.第一个拦截器preHandle=<strong>true</strong> , 第二个拦截器preHandle=<strong>true</strong> </p>
<p>111111-拦截器的MyInterceptor的preHandle()<br>22222-拦截器的MyInterceptor的preHandle()<br>=====执行MyController中的doSome方法=====<br>22222-拦截器的MyInterceptor的postHandle()<br>111111-拦截器的MyInterceptor的postHandle()<br>22222-拦截器的MyInterceptor的afterCompletion()<br>111111-拦截器的MyInterceptor的afterCompletion()</p>
<p>2.第一个拦截器preHandle=<strong>true</strong> , 第二个拦截器preHandle=<strong>false</strong></p>
<p>111111-拦截器的MyInterceptor的preHandle()<br>22222-拦截器的MyInterceptor的preHandle()<br>111111-拦截器的MyInterceptor的afterCompletion()</p>
<p>3.第一个拦截器preHandle=false , 第二个拦截器preHandle=true|false</p>
<p>111111-拦截器的MyInterceptor的preHandle()</p>
<h2 id="拦截器和过滤器的区别"><a href="#拦截器和过滤器的区别" class="headerlink" title="拦截器和过滤器的区别"></a><strong>拦截器和过滤器的区别</strong></h2><p>1.过滤器是servlet中的对象，  拦截器是框架中的对象<br>2.过滤器实现Filter接口的对象， 拦截器是实现HandlerInterceptor<br>3.过滤器是用来设置request，response的参数，属性的，侧重对数据过滤的。<br>  拦截器是用来验证请求的，能截断请求。<br>4.过滤器是在拦截器之前先执行的。<br>5.过滤器是tomcat服务器创建的对象<br>  拦截器是springmvc容器中创建的对象<br>6.过滤器是一个执行时间点。<br>  拦截器有三个执行时间点<br>7.过滤器可以处理jsp，js，html等等<br>  拦截器是侧重拦截对Controller的对象。 如果你的请求不能被DispatcherServlet接收， 这个请求不会执行拦截器内容<br>8.拦截器拦截普通类方法执行，过滤器过滤servlet请求响应</p>
<h2 id="使用拦截器检查登录的用户是不是能访问系统"><a href="#使用拦截器检查登录的用户是不是能访问系统" class="headerlink" title="使用拦截器检查登录的用户是不是能访问系统"></a>使用拦截器检查登录的用户是不是能访问系统</h2><p>实现步骤：<br>1.新建maven<br>2.修改web.xml注册中央调度器<br>3.新建index.jsp发起请求<br>4.创建MyController处理请求<br>5.创建结果show.jsp<br>6.创建一个login.jsp，模拟登录（把用户的信息放入到session）；<br>  创建一个jsp， logout.jsp,模拟退出系统（从session中删除数据）<br>7.创建拦截器，从session中获取用户的登录数据，验证能否访问系统<br>8.创建一个验证的jsp，如果验证视图，给出提示<br>9.创建springmvc配置文件<br>  声明组件扫描器<br>  声明拦截器</p>
<h2 id="SpringMVC流程"><a href="#SpringMVC流程" class="headerlink" title="SpringMVC流程"></a>SpringMVC流程</h2><p><img src="/2021/05/14/SpringMVC/Users\zzz\AppData\Roaming\Typora\typora-user-images\image-20210523201038426.png" alt="image-20210523201038426"></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/SpringMVC/" rel="tag"># SpringMVC</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/05/11/%E7%BA%BF%E7%A8%8B/" rel="prev" title="线程">
      <i class="fa fa-chevron-left"></i> 线程
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/05/14/Spring%E9%9D%A2%E7%BB%8F/" rel="next" title="Spring面经">
      Spring面经 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">1.</span> <span class="nav-text">实现步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#springmvc%E8%AF%B7%E6%B1%82%E7%9A%84%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B"><span class="nav-number">2.</span> <span class="nav-text">springmvc请求的处理流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#springmvc%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90"><span class="nav-number">3.</span> <span class="nav-text">springmvc执行过程源代码分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="nav-number">4.</span> <span class="nav-text">视图解析器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RequestMapping"><span class="nav-number">5.</span> <span class="nav-text">RequestMapping</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%90%E4%B8%AA%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-number">6.</span> <span class="nav-text">逐个接收请求参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8java%E5%AF%B9%E8%B1%A1%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-number">7.</span> <span class="nav-text">使用java对象接收请求参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E5%99%A8%E6%96%B9%E6%B3%95%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">8.</span> <span class="nav-text">处理器方法的返回值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E8%B5%B7%E7%9A%84%E8%AF%B7%E6%B1%82%E6%98%AF%E7%94%B1%E5%93%AA%E4%BA%9B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A8%8B%E5%BA%8F%E5%A4%84%E7%90%86%E7%9A%84"><span class="nav-number">9.</span> <span class="nav-text">发起的请求是由哪些服务器程序处理的</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">10.</span> <span class="nav-text">处理静态资源的方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="nav-number">11.</span> <span class="nav-text">路径问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E8%BD%AC%E5%8F%91"><span class="nav-number">12.</span> <span class="nav-text">请求重定向和转发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">13.</span> <span class="nav-text">异常处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">14.</span> <span class="nav-text">拦截器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">15.</span> <span class="nav-text">拦截器和过滤器的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%8B%A6%E6%88%AA%E5%99%A8%E6%A3%80%E6%9F%A5%E7%99%BB%E5%BD%95%E7%9A%84%E7%94%A8%E6%88%B7%E6%98%AF%E4%B8%8D%E6%98%AF%E8%83%BD%E8%AE%BF%E9%97%AE%E7%B3%BB%E7%BB%9F"><span class="nav-number">16.</span> <span class="nav-text">使用拦截器检查登录的用户是不是能访问系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SpringMVC%E6%B5%81%E7%A8%8B"><span class="nav-number">17.</span> <span class="nav-text">SpringMVC流程</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="pupil"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">pupil</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">pupil</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
